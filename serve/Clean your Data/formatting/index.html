
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Data Formatting</title>
    
    <meta name="author" content="Nathan Casler & Daniel Guaderrama">

    <!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le styles -->
    <link href="http://spatialcarpentry.github.io/data-hygiene/assets/themes/twitter/css/1.4.0/bootstrap.css" rel="stylesheet">
    <link href="http://spatialcarpentry.github.io/data-hygiene/assets/themes/twitter/css/style.css?body=1" rel="stylesheet" type="text/css" media="all">

    <!-- Le fav and touch icons -->
  <!-- Update these with your own images
    <link rel="shortcut icon" href="images/favicon.ico">
    <link rel="apple-touch-icon" href="images/apple-touch-icon.png">
    <link rel="apple-touch-icon" sizes="72x72" href="images/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="114x114" href="images/apple-touch-icon-114x114.png">
  -->
  </head>

  <body>
    <a name="top"></a>
    <div class="topbar">
      <div class="fill">
        <div class="container">
          <a class="brand" href="/">Spatial Data Carpentry</a>
          <ul class="nav">
            <!--
            
            


  
    
      
      	
      	<li><a href="http://spatialcarpentry.github.io/data-hygiene/categories.html">Categories</a></li>
      	
      
    
  
    
      
    
  
    
      
    
  
    
      
      	
      	<li><a href="http://spatialcarpentry.github.io/data-hygiene/pages.html">Pages</a></li>
      	
      
    
  
    
      
      	
      	<li><a href="http://spatialcarpentry.github.io/data-hygiene/archive.html">Archive</a></li>
      	
      
    
  
    
      
      	
      	<li><a href="http://spatialcarpentry.github.io/data-hygiene/tags.html">Tags</a></li>
      	
      
    
  
    
      
    
  
    
      
    
  


-->
            <li><a href="http://spatialcarpentry.github.io/about.html">About</a></li>
            <li><a href="http://spatialcarpentry.github.io/lessons.html">Lessons</a></li>
            <li><a href="http://spatialcarpentry.github.io/workshops.html">Workshops</a></li>
            <li><a href="http://www.iplantcollaborative.org/" target="_blank">iPlant Collaborative</a></li>
          </ul>
        </div>
      </div>
    </div>

    <div class="container">

      <div class="content">
        
<div class="page-header">
  <h1>Data Formatting <small></small></h1>
</div>

<div class="row">
  <div class="span10">
    <h4 id='prerequisites_intro_to_spatial_data_data_collection'><strong>Pre-requisites:</strong> Intro to Spatial Data, Data Collection</h4>

<h4 id='objectives'><strong>Objectives:</strong></h4>

<p>- Understanding how to wrangle or prepare your data - Recognize common methods to sptail data wrangling</p>
<hr />
<h1 id='data_formatting'>Data Formatting</h1>

<p>Data manipulation can be a simple endeavour if the data inputs come in the same or compatible formats. Data sources will usually have a specific format they use for their data which can make it easy to use work with their datasets. Unfortunately, when we gather data from various sources, we are usually given several different formats to data to deal with. Data wrangling is the process of manipulating and reformatting disparate data sources into compatible datasets. Data wrangling makes proper analysis/modeling possible. There are several methods common to spatial data wrangling some of which are:</p>

<ul>
<li>Reprojection - Conversion from one projection coordinate system to another</li>

<li>Rasterization/Vectorization - Conversion from raster dataset to vector and vice versa</li>

<li>Extent Definition - Delineates the bounding box for a dataset, all data outside the box will become null</li>

<li>Reclassification - Assigns categorical values to a field based on a the contained values</li>

<li>Spatial Joins - Merges datasets based on spatial proximity/overlay</li>
</ul>

<p>These methods can be performed using a variety of tools depending on the specific needs of the dataset. Here are a few typical choices to aide in data wrangling:</p>
<br /><hr />
<h2 id='exercise'>Exercise</h2>

<ol>
<li>
<p>Set project projection to EPSG:2927<br /><br /> Before starting any project in a GIS program, you should first set the project projection to make sure your data comes in with the same extent. <br />If you don&#8217;t set the project&#8217;s projection, the program will use the projection of the first layer added or EPSG:4326.<br /><br /> You can set the projection with the following steps:<br /><br /> <img alt='projectProperties' class='screen-shot' src='http://spatialcarpentry.github.io/data-hygiene/assets/themes/twitter/images/qgis-project-properties.png' /></p>

<ul>
<li>In the top navbar go Project &gt; Project Properties</li>

<li>Select CRS in the Left menu</li>

<li>Check <em>Enable On-the-fly CRS transformation</em></li>

<li>Using the Filter, search <em>2927</em> and select <em>NAD83(HARN)/Washington South(ftUS) EPSG:2927</em> from the List of Projections.</li>

<li>Apply and OK to save changes.<br /> <img alt='projection' class='screen-shot' src='http://spatialcarpentry.github.io/data-hygiene/assets/themes/twitter/images/qgis-projection.png' /></li>
</ul>
</li>

<li>
<p>Add the US States shapefile<br /><br /> Since our project is directed at the state of Washington. We should extract the Washington state boundary for our study. The GADM project provides high-quality boundary data on country,state and county levels. We can use the US-state level dataset to get the Washington boundary. <br /><br /></p>

<ul>
<li>Select <em>Add Vector Layer</em> in the left toolbar</li>

<li>Browse to the USA_adm1.shp layer from the iPlant Data Store<br /> <img alt='USAStates' class='screen-shot' src='http://spatialcarpentry.github.io/data-hygiene/assets/themes/twitter/images/usa-states.png' /></li>
</ul>
</li>

<li>
<p>Create a layer for the state of Washington</p>

<ul>
<li>
<p>Within the Layers List, click on USA_adm1 to activate layer tools.</p>
</li>

<li>
<p>Select Single Feature tool:<br /><em>Menu Bar > View > Select > Select Single Feature</em> OR<br />in the top toolbar, select <em>Select Single Feature</em></p>
</li>

<li>
<p>Click on the state of Washington to select it<br /> <img alt='washington-selected' class='screen-shot' src='http://spatialcarpentry.github.io/data-hygiene/assets/themes/twitter/images/washington-selected.png' /></p>
</li>

<li>
<p>Right click on the USA_adm1 layer and select <em>Save Selection As&#8230;</em></p>

<ul>
<li>Format: ESRI Shapefile</li>

<li>Save as: washington.shp</li>

<li>Encoding: UTF-8</li>

<li>CRS: + Selected CRS + Browse &gt; <em>NAD83(HARN)/Washington South (ftUS) EPSG:2927</em><br /> <img alt='saveWashington' class='screen-shot' src='http://spatialcarpentry.github.io/data-hygiene/assets/themes/twitter/images/save-washington.png' /></li>
</ul>
</li>
</ul>
</li>

<li>
<p>Load the new washington layer<br /></p>

<ul>
<li>Select <em>Add Vector Layer</em></li>

<li>Browse to the new washington layer and click <em>Open</em><br /></li>
</ul>
</li>

<li>
<p>Remove the USA_adm1 layer from the project <br /> Now that we have the Washington layer, we can get rid of the U.S. layer. <br /></p>

<ul>
<li>Right click the layer in the table of contents</li>

<li>Select <em>Remove</em></li>
</ul>
</li>

<li>
<p>Add the DEM layer from the iPlant data store<br /> DEMs or <em>Digital Elevation Models</em> are very useful for establishing topological context in a map. DEMs generally come as a raster dataset that consists of elevation values. There are several different byproducts that can be created from DEMs.<br /><br /> This DEM was taken from the GTOPO30 satellite data.<br /></p>

<ul>
<li>In the left toolbar, select <em>Add Raster Layer</em></li>

<li>Select <em>source_files/W140N90.DEM</em><br /> <img alt='demLoad' class='screen-shot' src='http://spatialcarpentry.github.io/data-hygiene/assets/themes/twitter/images/dem-load.png' /></li>
</ul>
</li>

<li>
<p>Project the dem to EPSG:2927</p>

<ul>
<li>In the top menu, go to Raster &gt; Projections &gt; Warp (Reproject)</li>

<li>Use the following options</li>

<li>Input File: <em>W140N90</em></li>

<li>Output File: <em>secondary_files/dem-project.tif</em></li>

<li>Source SRS: <em>EPSG:4326</em></li>

<li>Target SRS: <strong>2927</strong><br /> &#160;&#160;&#160;&#160;<strong>NOTE</strong>: When searching for an SRS, you MUST click on SRS in the bottom list otherwise you will not actually be selecting an SRS</li>

<li>Resampling Method: <em>Near</em></li>

<li>No data values: <em>0</em></li>

<li>Be sure to click CLOSE and not OK when exiting tools. Clicking OK will rerun the tool. <img alt='projectDEM' class='screen-shot' src='http://spatialcarpentry.github.io/data-hygiene/assets/themes/twitter/images/project-dem.png' /></li>
</ul>
</li>

<li>
<p><strong>Important!</strong> Save you current project workspace in your project directory. Saving will maintain the configuration of your project workspace. You will be using this project workspace for the following lessons.</p>
</li>
</ol>

<h3 id='continue_to_the_next_lesson'>Continue to the next lesson&#8230;</h3>
    <hr>
    <div class="pagination">
      <ul>
      
      <li class="prev"><a href="http://spatialcarpentry.github.io/data-hygiene/Clean your Data/data-cleaning" title="Data Hygiene">&larr; Previous</a></li>
      
      <!--<li><a href="http://spatialcarpentry.github.io/data-hygiene/archive.html">Archive</a></li>-->
      
      <li class="next"><a href="http://spatialcarpentry.github.io/data-hygiene/Clean your Data/joining-census-data" title="Census Exercise">Next &rarr;</a></li>
      
      </ul>
      <span class="back-to-top"><a href="#top">Back to Top</a></span>
    </div>
    <hr>
    <!--


  <div id="disqus_thread"></div>
<script type="text/javascript">
    
    
    var disqus_shortname = 'jekyllbootstrap'; // required: replace example with your forum shortname
    
    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>



-->
  </div>
  
  <div class="span4">
    <!--<h4>Published</h4>
    <div class="date"><span>01 March 2002</span></div>-->

    <ul class="lessons">
      <h4>Lessons</h4>
      <li><a href="http://spatialcarpentry.github.io/setup/">Setup</a></li>
      <li><a href="http://spatialcarpentry.github.io/basics/">Basics</a></li>
      <li><a href="http://spatialcarpentry.github.io/data-collection/">Data Collection</a></li>
      <li><a href="http://spatialcarpentry.github.io/data-hygiene/">Data Hygiene</a></li>
      <li><a href="http://spatialcarpentry.github.io/spatial-analysis/">Spatial Analysis</a></li>
      <li><a href="http://spatialcarpentry.github.io/cartography/">Cartography</a></li>
    </ul>

    <ol class="posts">
      <h4>Contents</h4>
      <span class="post-nav-title">Data Hygiene</span>
      
        <li><a href="http://spatialcarpentry.github.io/data-hygiene/Clean your data/overview">Overview</a></li>
        
        <li><a href="http://spatialcarpentry.github.io/data-hygiene/Clean your Data/data-cleaning">Data Hygiene</a></li>
        
        <li><a href="http://spatialcarpentry.github.io/data-hygiene/Clean your Data/formatting">Data Formatting</a></li>
        
        <li><a href="http://spatialcarpentry.github.io/data-hygiene/Clean your Data/joining-census-data">Census Exercise</a></li>
        
    </ol>

  
    <h4>Tags</h4>
    <ul class="tag_box">
    
    


  
     
    	<li><a href="http://spatialcarpentry.github.io/data-hygiene/tags.html#wrangling-ref">wrangling <span>2</span></a></li>
    
  



    </ul>
    
  </div>
</div>


      </div>

      <footer>
        <p>&copy; <a href="http://www.iplantcollaborative.org/" target="_blank">iPlant Collaborative</a>, <a href="http://aegis.webhost.uits.arizona.edu/" target="_blank">AEGIS</a>, Nathan Casler & Daniel Guaderrama 
          with help from <a href="http://jekyllbootstrap.com" target="_blank" title="The Definitive Jekyll Blogging Framework">Jekyll Bootstrap</a>
          and <a href="http://twitter.github.com/bootstrap/" target="_blank">Twitter Bootstrap</a>
        </p>
      </footer>

    </div> <!-- /container -->

    




  <script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-123-12']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>



  </body>
</html>

